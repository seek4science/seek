<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>module Seek::Rdf::RdfRepositoryStorage - SEEK Technical Guide</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/seek/rdf/rdf_repository_storage.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="RdfFileStorage.html">Seek::Rdf::RdfFileStorage</a>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-rdf_repository_configured-3F">#rdf_repository_configured?</a>
    
    <li><a href="#method-i-related_items_from_sparql">#related_items_from_sparql</a>
    
    <li><a href="#method-i-remove_rdf_from_repository">#remove_rdf_from_repository</a>
    
    <li><a href="#method-i-send_rdf_to_repository">#send_rdf_to_repository</a>
    
    <li><a href="#method-i-update_repository_rdf">#update_repository_rdf</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../doc/ADMINISTRATION.html">ADMINISTRATION</a>
  
    <li class="file"><a href="../../doc/BACKUPS.html">BACKUPS</a>
  
    <li class="file"><a href="../../doc/CONTACTING_US.html">CONTACTING_US</a>
  
    <li class="file"><a href="../../doc/CONTRIBUTING_TO_SEEK.html">CONTRIBUTING_TO_SEEK</a>
  
    <li class="file"><a href="../../doc/CREDITS.html">CREDITS</a>
  
    <li class="file"><a href="../../doc/EARLIER-UPGRADES.html">EARLIER-UPGRADES</a>
  
    <li class="file"><a href="../../doc/INSTALL.html">INSTALL</a>
  
    <li class="file"><a href="../../doc/INSTALL-PRODUCTION.html">INSTALL-PRODUCTION</a>
  
    <li class="file"><a href="../../doc/OTHER-DISTRIBUTIONS.html">OTHER-DISTRIBUTIONS</a>
  
    <li class="file"><a href="../../doc/README.html">README</a>
  
    <li class="file"><a href="../../doc/SETTING-UP-VIRTUOSO.html">SETTING-UP-VIRTUOSO</a>
  
    <li class="file"><a href="../../doc/UPGRADING.html">UPGRADING</a>
  
    <li class="file"><a href="../../doc/UPGRADING-TO-0-18.html">UPGRADING-TO-0-18</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Seek.html">Seek</a>
  
    <li><a href="../../Seek/Rdf.html">Seek::Rdf</a>
  
    <li><a href="../../Seek/Rdf/RdfFileStorage.html">Seek::Rdf::RdfFileStorage</a>
  
    <li><a href="../../Seek/Rdf/RdfGeneration.html">Seek::Rdf::RdfGeneration</a>
  
    <li><a href="../../Seek/Rdf/RdfRepository.html">Seek::Rdf::RdfRepository</a>
  
    <li><a href="../../Seek/Rdf/RdfRepositoryStorage.html">Seek::Rdf::RdfRepositoryStorage</a>
  
    <li><a href="../../Seek/Rdf/VirtuosoRepository.html">Seek::Rdf::VirtuosoRepository</a>
  
    <li><a href="../../Seek/Rdf/VirtuosoRepository/Config.html">Seek::Rdf::VirtuosoRepository::Config</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Seek::Rdf::RdfRepositoryStorage</h1>

  <div id="description" class="description">
    
<p>Module that works in conjuction with RdfStorage to support maintaning the
RDF in a triple store as well as those stored on file</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-rdf_repository_configured-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rdf_repository_configured?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>checks that a repository is available and that is has been configured for
the current Rails.env</p>
          

          
          <div class="method-source-code" id="rdf_repository_configured-3F-source">
            <pre><span class="ruby-comment"># File lib/seek/rdf/rdf_repository_storage.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rdf_repository_configured?</span>
  <span class="ruby-operator">!</span><span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">configured?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- rdf_repository_configured-3F-source -->
          
        </div>

        

        
      </div><!-- rdf_repository_configured-3F-method -->

    
      <div id="method-i-related_items_from_sparql" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">related_items_from_sparql</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>returns any active-record items that are linked to this item, as determined
by querying the repository. These can be subject or object items, where
this item is the object or subject respectively.</p>
          

          
          <div class="method-source-code" id="related_items_from_sparql-source">
            <pre><span class="ruby-comment"># File lib/seek/rdf/rdf_repository_storage.rb, line 33</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">related_items_from_sparql</span>
  <span class="ruby-identifier">items</span> = []
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rdf_repository_configured?</span>
    <span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">uris_of_items_related_to</span>(<span class="ruby-keyword">self</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uri</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">uri</span>
        <span class="ruby-identifier">route</span> = <span class="ruby-constant">SEEK</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>.<span class="ruby-identifier">routes</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-identifier">uri</span>)
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">route</span>
        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">route</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">route</span>[<span class="ruby-value">:id</span>].<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">route</span>[<span class="ruby-value">:controller</span>].<span class="ruby-identifier">singularize</span>.<span class="ruby-identifier">camelize</span>.<span class="ruby-identifier">constantize</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-identifier">klass</span>
          <span class="ruby-identifier">id</span> = <span class="ruby-identifier">route</span>[<span class="ruby-value">:id</span>]
          <span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">items</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- related_items_from_sparql-source -->
          
        </div>

        

        
      </div><!-- related_items_from_sparql-method -->

    
      <div id="method-i-remove_rdf_from_repository" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_rdf_from_repository</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>will remove the rdf triples that were previously sent the the repository
and stored in the rdf file for self. it will also remove the saved file
containing the rdf</p>
          

          
          <div class="method-source-code" id="remove_rdf_from_repository-source">
            <pre><span class="ruby-comment"># File lib/seek/rdf/rdf_repository_storage.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_rdf_from_repository</span>
  <span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">remove_rdf</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- remove_rdf_from_repository-source -->
          
        </div>

        

        
      </div><!-- remove_rdf_from_repository-method -->

    
      <div id="method-i-send_rdf_to_repository" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">send_rdf_to_repository</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Will send the rdf related to self to the configured repository. This will
not remove previously existing triples. It will also updated the saved file
containing the latest rdf</p>
          

          
          <div class="method-source-code" id="send_rdf_to_repository-source">
            <pre><span class="ruby-comment"># File lib/seek/rdf/rdf_repository_storage.rb, line 9</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_rdf_to_repository</span>
  <span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">send_rdf</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- send_rdf_to_repository-source -->
          
        </div>

        

        
      </div><!-- send_rdf_to_repository-method -->

    
      <div id="method-i-update_repository_rdf" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_repository_rdf</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>updates the repository with the changes for self, consolidating the
differences between now and when the last rdf was created, and only
replacing those that have changed. It will also update the saved file
containing the rdf</p>
          

          
          <div class="method-source-code" id="update_repository_rdf-source">
            <pre><span class="ruby-comment"># File lib/seek/rdf/rdf_repository_storage.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_repository_rdf</span>
  <span class="ruby-constant">Seek</span><span class="ruby-operator">::</span><span class="ruby-constant">Rdf</span><span class="ruby-operator">::</span><span class="ruby-constant">RdfRepository</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">update_rdf</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_repository_rdf-source -->
          
        </div>

        

        
      </div><!-- update_repository_rdf-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

